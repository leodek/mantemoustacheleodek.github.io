<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="index, follow" />
  <title>ManteMoustache ‚Äî Soluciones Industriales y Mantenimiento</title>
  <meta name="description" content="ManteMoustache: soluciones digitales para gesti√≥n industrial, equipos, OTs/OPs e insumos." />
  <link rel="canonical" href="https://www.mantemoustache.com/" />

  <!-- Social -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ManteMoustache ‚Äî Soluciones Industriales" />
  <meta property="og:description" content="Gesti√≥n de equipos, OTs/OPs e insumos para industria." />
  <meta property="og:url" content="https://www.mantemoustache.com/" />
  <meta property="og:site_name" content="ManteMoustache" />
  <meta property="og:image" content="/splash.png" />
  <meta property="og:locale" content="es_UY" />

  <link rel="icon" href="/favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0A192F; --panel:#0F1E3A; --panel-2:#112240;
      --text:#E6F1FF; --muted:#8892B0; --accent:#FFD700;
      --shadow:rgba(0,0,0,.5); --ring:rgba(255,215,0,.25);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg); color:var(--text);
      min-height:100vh; display:flex; flex-direction:column; line-height:1.6;
    }
    header{background:var(--panel); border-bottom:1px solid #0e1a31; position:sticky; top:0; z-index:50;}
    .wrap{max-width:1200px; margin:0 auto; padding:0 20px}
    .topbar{display:flex; align-items:center; justify-content:space-between; height:74px;}
    .brand{display:flex; align-items:center; gap:12px; text-decoration:none}
    .brand img{height:56px; width:auto; display:block; transition:transform .25s ease; filter:drop-shadow(0 2px 6px var(--shadow))}
    .brand:hover img{transform:scale(1.04)}
    .brand-title{font-weight:700; letter-spacing:.2px; color:var(--text); font-size:1.1rem}
    nav a{color:var(--text); text-decoration:none; font-weight:600; margin-left:22px; padding:8px 10px; border-radius:8px; transition:.2s}
    nav a:hover{color:var(--accent); background:rgba(255,215,0,.08)}

    .hero{background:linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%); border-bottom:1px solid #0e1a31;}
    .hero-grid{display:grid; grid-template-columns:1.05fr .95fr; gap:40px; align-items:center; padding:64px 20px; max-width:1200px; margin:0 auto}
    .hero-kicker{color:var(--accent); font-weight:700; letter-spacing:.12em; font-size:.9rem; text-transform:uppercase}
    .hero h1{font-size:clamp(2.2rem,4vw,3.2rem); line-height:1.15; margin:.6rem 0 1rem}
    .hero p{color:var(--muted); font-size:1.15rem; max-width:48ch}
    .cta{display:flex; gap:14px; flex-wrap:wrap; margin-top:24px}
    .btn{display:inline-block; font-weight:700; padding:12px 20px; border-radius:10px; border:2px solid transparent; text-decoration:none; transition:.25s; box-shadow:0 6px 18px -8px var(--shadow)}
    .btn-primary{background:var(--accent); color:#08142b}
    .btn-primary:hover{transform:translateY(-1px); box-shadow:0 10px 24px -10px var(--shadow)}
    .btn-ghost{color:var(--accent); border-color:var(--accent); background:transparent}
    .btn-ghost:hover{background:rgba(255,215,0,.08)}

    .hero-illu{position:relative; display:flex; align-items:center; justify-content:center}
    .frame{background:rgba(8,20,43,.6); border:1px solid #0e1a31; border-radius:20px; padding:18px; box-shadow:0 16px 40px -20px var(--shadow), 0 0 0 6px var(--ring); max-width:640px; width:100%; overflow:hidden}
    .slide-stack{position:relative; width:100%; height:100%}
    .slide{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; opacity:0; transition:opacity 800ms ease}
    .slide img{width:100%; max-height:520px; object-fit:contain; display:block; border-radius:14px}
    .slide.active{opacity:1}

    section{padding:64px 20px}
    h2{text-align:center; color:var(--accent); font-size:clamp(1.6rem,2.5vw,2rem); margin-bottom:10px}
    .section-sub{text-align:center; color:var(--muted); margin:0 auto 26px; max-width:70ch}

    .cards{display:grid; grid-template-columns:repeat(2, minmax(260px,1fr)); gap:22px; max-width:1000px; margin:26px auto 0}
    .card{background:var(--panel); border:1px solid #0e1a31; border-radius:14px; padding:22px; box-shadow:0 8px 28px -18px var(--shadow); transition:transform .2s, box-shadow .2s}
    .card:hover{transform:translateY(-3px); box-shadow:0 18px 40px -24px var(--shadow)}
    .download{background:linear-gradient(180deg, var(--panel-2) 0%, var(--panel) 100%); border-top:1px solid #0e1a31; border-bottom:1px solid #0e1a31}
    footer{background:var(--panel); border-top:1px solid #0e1a31; color:var(--muted); margin-top:auto}
    .footer-inner{max-width:900px; margin:0 auto; padding:36px 20px; text-align:center}
    footer a{color:var(--accent); text-decoration:none}
    footer a:hover{text-decoration:underline}
    @media (max-width:980px){ .hero-grid{grid-template-columns:1fr; gap:28px} .cards{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="wrap topbar">
      <a class="brand" href="/" aria-label="Ir al inicio">
        <img src="/splash.png" alt="ManteMoustache logo" />
        <span class="brand-title">ManteMoustache</span>
      </a>
      <nav role="navigation" aria-label="Principal">
        <a href="#about">Sobre Nosotros</a>
        <a href="#download">Descarga</a>
        <a href="#contact">Contacto</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-grid">
      <div>
        <div class="hero-kicker">Soluciones Industriales</div>
        <h1>Gesti√≥n de equipos, OTs/OPs e insumos ‚Äî simple, r√°pida y profesional</h1>
        <p>ManteMoustache acelera la digitalizaci√≥n del mantenimiento en PYMEs industriales. Inventari√° equipos, program√° preventivos, gener√° OTs autom√°ticas y control√° insumos en un solo lugar.</p>
        <div class="cta">
          <a class="btn btn-primary" href="/tienda.html">Ver productos</a>
          <a class="btn btn-ghost" href="#about">C√≥mo funciona</a>
        </div>
      </div>

      <div class="hero-illu">
        <div class="frame">
          <div class="slide-stack" id="heroStack">
            <div class="slide active"><img alt="Imagen industrial" /></div>
            <div class="slide"><img alt="Imagen industrial" /></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="wrap">
    <h2>Sobre Nosotros</h2>
    <p class="section-sub">
      Empresa uruguaya enfocada en herramientas simples y robustas para mantenimiento industrial.
      Liderado por Pablo Rivero (Tecn√≥logo Industrial Mec√°nico), combinamos experiencia de planta con software moderno.
    </p>
    <div class="cards">
      <div class="card">
        <h3>üõ†Ô∏è Listado de Equipos</h3>
        <p>Registro, clasificaci√≥n y seguimiento del estado, con trazabilidad t√©cnica e im√°genes por equipo.</p>
      </div>
      <div class="card">
        <h3>üì¶ Listado de Insumos</h3>
        <p>Stock, movimientos y alertas de m√≠nimos, integrado al flujo de OTs y responsables.</p>
      </div>
    </div>
  </section>

  <!-- Download -->
  <section id="download" class="download">
    <div class="wrap">
      <h2>Descarga</h2>
      <p class="section-sub">
        Pr√≥ximamente publicaremos instaladores y documentaci√≥n.
        Si quer√©s enterarte primero, escribinos a
        <a href="mailto:mantemoustache@gmail.com">mantemoustache@gmail.com</a>.
      </p>
      <div style="text-align:center; margin-top:14px;">
        <a class="btn btn-primary" href="#contact">Quiero recibir novedades</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer id="contact">
    <div class="footer-inner">
      <p>Contacto: Pablo Rivero</p>
      <p>Email: <a href="mailto:mantemoustache@gmail.com">mantemoustache@gmail.com</a></p>
      <p>Tel√©fono: <a href="tel:+59898153659">+598 981 536 59</a></p>
      <p>&copy; <span id="year"></span> ManteMoustache. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- JS -->
  <script>
    // A√±o
    document.getElementById('year').textContent = new Date().getFullYear();

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', e=>{
        const el = document.querySelector(a.getAttribute('href'));
        if(!el) return; e.preventDefault();
        el.scrollIntoView({behavior:'smooth'});
      });
    });

    // ===== Carrusel auto-actualizable desde /fotos =====
    const INTERVAL_MS = 5000;
    const IMG_EXT_RE = /\.(jpg|jpeg|png|webp|gif)$/i;

    const stack  = document.getElementById('heroStack');
    const slides = stack.querySelectorAll('.slide');
    const imgA   = slides[0].querySelector('img');
    const imgB   = slides[1].querySelector('img');

    let urls = [];
    let idx  = 0;
    let useA = true;

    // Evitar cach√© duro (service worker / proxy)
    const cb = () => `?cb=${Date.now()}`;

    function preload(src){
      return new Promise((resolve, reject)=>{
        const i = new Image();
        i.onload = ()=>resolve(src);
        i.onerror = reject;
        i.src = src;
      });
    }

    // 1) Listado por API de GitHub
    async function listByAPI(){
      const owner = "mantemoustacheleodek";
      const repo  = "mantemoustacheleodek.github.io";
      const paths = ["fotos"];                      // carpeta a listar
      const branches = ["maestro","master","main"]; // por si la rama cambia

      for (const path of paths){
        for (const br of branches){
          const api = `https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(br)}`;
          try{
            const r = await fetch(api, {headers: {"Accept":"application/vnd.github+json"}});
            if(!r.ok) { console.warn("[API]", br, path, "->", r.status); continue; }
            const data = await r.json();
            const found = data
              .filter(f => f.type === "file" && IMG_EXT_RE.test(f.name))
              .map(f => `/fotos/${encodeURIComponent(f.name)}`);
            if(found.length){ console.log("[API] usando", br, path, found); return found; }
          }catch(e){ console.warn("[API err]", e); }
        }
      }
      return [];
    }

    // 2) Fallback por sondeo local (01..60 + nombres comunes)
    async function listByProbing(){
      const exts = ["jpg","jpeg","png","webp","gif"];
      const candidates = [];
      for(let n=1;n<=60;n++){
        const base = String(n).padStart(2,"0");
        for(const ext of exts){ candidates.push(`/fotos/${base}.${ext}`); }
      }
      const common = ["hero","portada","planta","equipo","maquinaria","industrial"];
      for(const name of common){ for(const ext of exts){ candidates.push(`/fotos/${name}.${ext}`); } }

      const found = [];
      await Promise.allSettled(candidates.map(src => preload(src + cb()).then(()=>found.push(src))));
      const unique = [...new Set(found)];
      if(unique.length) console.log("[PROBE] detectadas", unique);
      return unique;
    }

    async function getAllImages(){
      let list = await listByAPI();
      if(!list.length) list = await listByProbing();
      // agrega cache-buster a cada una
      return list.map(u => u + cb());
    }

    async function initCarousel(){
      urls = await getAllImages();

      if(!urls.length){
        console.warn("No se encontraron im√°genes en /fotos/");
        // como √∫ltimo recurso, intenta mostrar /fotos/01.jpg si existe
        try {
          await preload("/fotos/01.jpg" + cb());
          urls = ["/fotos/01.jpg" + cb()];
        } catch (e) {}
      }

      if(!urls.length) return;

      // Primera
      try{ await preload(urls[0]); }catch(e){}
      imgA.src = urls[0];
      slides[0].classList.add('active');

      if(urls.length > 1){
        idx = 1;
        setInterval(nextSlide, INTERVAL_MS);
      }
    }

    async function nextSlide(){
      const nextUrl = urls[idx % urls.length];
      try { await preload(nextUrl); } catch(e){}
      if(useA){
        imgB.src = nextUrl; slides[1].classList.add('active'); slides[0].classList.remove('active');
      }else{
        imgA.src = nextUrl; slides[0].classList.add('active'); slides[1].classList.remove('active');
      }
      useA = !useA; idx++;
      // Preload de la siguiente
      const ahead = urls[idx % urls.length]; preload(ahead).catch(()=>{});
    }

    initCarousel();
  </script>
</body>
</html>
